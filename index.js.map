{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst API_KEY = '48427757-fc949e79797ba7e940d238484';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport const fetchImages = async (query, page) => {\n    const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page,\n    };\n\n    const { data } = await axios.get(BASE_URL, { params });\n    return data;\n};","\n\nexport const createGalleryCardTemplate = (imgInfo) => {\n    return `\n    <li class=\"gallery-item\">\n        <a href=\"${imgInfo.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n        </a>\n        <div class=\"info\">\n        <p class=\"info-item\"><b>Likes:</b> ${imgInfo.likes}</p>\n        <p class=\"info-item\"><b>Views:</b> ${imgInfo.views}</p>\n        <p class=\"info-item\"><b>Comments:</b> ${imgInfo.comments}</p>\n        <p class=\"info-item\"><b>Downloads:</b> ${imgInfo.downloads}</p>\n        </div>\n    </li>\n    `;\n};\n\nexport const renderGallery = (images) => {\n    if (!images || images.length === 0) {\n        console.error('No images to render');\n        return;\n    }\n\n    const galleryEl = document.querySelector('.js-gallery');\n    const galleryTemplate = images.map(imgInfo => createGalleryCardTemplate(imgInfo)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n};\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-function.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\nconst loaderEl = document.querySelector('.loader');\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalHits = 0;\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.query.value.trim();\n    console.log('Search query:', searchedQuery);\n\n    if (searchedQuery === '') {\n      iziToast.error({ title: 'Error', message: 'Please enter a search term' });\n      return;\n    }\n\n    page = 1;\n    totalHits = 0;\n    galleryEl.innerHTML = ''; \n    loadMoreBtnEl.classList.add('is-hidden');\n    loaderEl.classList.remove('is-hidden');\n\n    loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n\n    const { hits, totalHits: newTotalHits } = await fetchImages(searchedQuery, page);\n\n    if (hits.length === 0) {\n      iziToast.info({ title: 'No results', message: 'No images found. Please try again.' });\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n\n    totalHits = newTotalHits;\n    renderGallery(hits, true);\n\n    if (totalHits > hits.length) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const lightbox = new SimpleLightbox('.js-gallery a');\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong!' });\n    console.error(error);\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nconst smoothScroll = () => {\n  const cardHeight = galleryEl.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    page++;\n    loaderEl.classList.remove('is-hidden');\n\n    const { hits } = await fetchImages(searchedQuery, page);\n    console.log('Fetched more hits:', hits);\n\n    if (hits.length > 0) {\n      renderGallery(hits, false); \n    }\n\n    const lightbox = new SimpleLightbox('.js-gallery a');\n    lightbox.refresh();\n\n    if (page * 15 >= totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({ title: 'End of results', message: \"We're sorry, but you've reached the end of search results.\" });\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n    }\n\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong!' });\n    console.error(error);\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\n\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","params","data","axios","createGalleryCardTemplate","imgInfo","renderGallery","images","galleryEl","galleryTemplate","searchFormEl","loadMoreBtnEl","loaderEl","searchedQuery","totalHits","onSearchFormSubmit","event","iziToast","onLoadMoreBtnClick","hits","newTotalHits","SimpleLightbox","error","smoothScroll","cardHeight"],"mappings":"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"}